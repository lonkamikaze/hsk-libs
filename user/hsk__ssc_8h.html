<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>hsk-libs-user: hsk_ssc/hsk_ssc.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">hsk-libs-user
   &#160;<span id="projectnumber">257</span>
   </div>
   <div id="projectbrief">High Speed Karlsruhe XC878 library collection</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('hsk__ssc_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">hsk_ssc.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>HSK Synchronous Serial Interface headers.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;hsk_ssc.isr&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for hsk_ssc.h:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="hsk__ssc_8h__incl.svg" width="146" height="112"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</div>
<p><a href="hsk__ssc_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gac2a010f3ef54b85e255314c005f77864"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__SSC__PORTS.html#gac2a010f3ef54b85e255314c005f77864">SSC_MRST_P05</a>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:gac2a010f3ef54b85e255314c005f77864"><td class="mdescLeft">&#160;</td><td class="mdescRight">Master mode RX, slave mode TX port P0.5.  <a href="group__SSC__PORTS.html#gac2a010f3ef54b85e255314c005f77864">More...</a><br /></td></tr>
<tr class="separator:gac2a010f3ef54b85e255314c005f77864"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa31ef518f36ba1529a0d777292881496"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__SSC__PORTS.html#gaa31ef518f36ba1529a0d777292881496">SSC_MRST_P14</a>&#160;&#160;&#160;0</td></tr>
<tr class="memdesc:gaa31ef518f36ba1529a0d777292881496"><td class="mdescLeft">&#160;</td><td class="mdescRight">Master mode RX, slave mode TX port P1.4.  <a href="group__SSC__PORTS.html#gaa31ef518f36ba1529a0d777292881496">More...</a><br /></td></tr>
<tr class="separator:gaa31ef518f36ba1529a0d777292881496"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga253a50d401d3a90dd0768cf9a4f92c29"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__SSC__PORTS.html#ga253a50d401d3a90dd0768cf9a4f92c29">SSC_MRST_P15</a>&#160;&#160;&#160;2</td></tr>
<tr class="memdesc:ga253a50d401d3a90dd0768cf9a4f92c29"><td class="mdescLeft">&#160;</td><td class="mdescRight">Master mode RX, slave mode TX port P1.5.  <a href="group__SSC__PORTS.html#ga253a50d401d3a90dd0768cf9a4f92c29">More...</a><br /></td></tr>
<tr class="separator:ga253a50d401d3a90dd0768cf9a4f92c29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8b196c85ea0d18698b836533f7152c27"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__SSC__PORTS.html#ga8b196c85ea0d18698b836533f7152c27">SSC_MTSR_P04</a>&#160;&#160;&#160;(1 &lt;&lt; 2)</td></tr>
<tr class="memdesc:ga8b196c85ea0d18698b836533f7152c27"><td class="mdescLeft">&#160;</td><td class="mdescRight">Master mode TX, slave mode RX port P0.4.  <a href="group__SSC__PORTS.html#ga8b196c85ea0d18698b836533f7152c27">More...</a><br /></td></tr>
<tr class="separator:ga8b196c85ea0d18698b836533f7152c27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad9aa9e2d7d13eae722dcd9fa8f5ad245"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__SSC__PORTS.html#gad9aa9e2d7d13eae722dcd9fa8f5ad245">SSC_MTSR_P13</a>&#160;&#160;&#160;(0 &lt;&lt; 2)</td></tr>
<tr class="memdesc:gad9aa9e2d7d13eae722dcd9fa8f5ad245"><td class="mdescLeft">&#160;</td><td class="mdescRight">Master mode TX, slave mode RX port P1.3.  <a href="group__SSC__PORTS.html#gad9aa9e2d7d13eae722dcd9fa8f5ad245">More...</a><br /></td></tr>
<tr class="separator:gad9aa9e2d7d13eae722dcd9fa8f5ad245"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2aa6cb7c339fc33cbd577c37175c35d2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__SSC__PORTS.html#ga2aa6cb7c339fc33cbd577c37175c35d2">SSC_MTSR_P14</a>&#160;&#160;&#160;(2 &lt;&lt; 2)</td></tr>
<tr class="memdesc:ga2aa6cb7c339fc33cbd577c37175c35d2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Master mode TX, slave mode RX port P1.4.  <a href="group__SSC__PORTS.html#ga2aa6cb7c339fc33cbd577c37175c35d2">More...</a><br /></td></tr>
<tr class="separator:ga2aa6cb7c339fc33cbd577c37175c35d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7bf9146750663136e92031cef63a4b83"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__SSC__PORTS.html#ga7bf9146750663136e92031cef63a4b83">SSC_SCLK_P03</a>&#160;&#160;&#160;(1 &lt;&lt; 4)</td></tr>
<tr class="memdesc:ga7bf9146750663136e92031cef63a4b83"><td class="mdescLeft">&#160;</td><td class="mdescRight">Synchronous clock port P0.3.  <a href="group__SSC__PORTS.html#ga7bf9146750663136e92031cef63a4b83">More...</a><br /></td></tr>
<tr class="separator:ga7bf9146750663136e92031cef63a4b83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8f05deb438e1a65552e085ac1ed96072"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__SSC__PORTS.html#ga8f05deb438e1a65552e085ac1ed96072">SSC_SCLK_P12</a>&#160;&#160;&#160;(0 &lt;&lt; 4)</td></tr>
<tr class="memdesc:ga8f05deb438e1a65552e085ac1ed96072"><td class="mdescLeft">&#160;</td><td class="mdescRight">Synchronous clock port P1.2.  <a href="group__SSC__PORTS.html#ga8f05deb438e1a65552e085ac1ed96072">More...</a><br /></td></tr>
<tr class="separator:ga8f05deb438e1a65552e085ac1ed96072"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaedfa633a16d9466f031d2b1c81276ac7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__SSC__PORTS.html#gaedfa633a16d9466f031d2b1c81276ac7">SSC_SCLK_P13</a>&#160;&#160;&#160;(2 &lt;&lt; 4)</td></tr>
<tr class="memdesc:gaedfa633a16d9466f031d2b1c81276ac7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Synchronous clock port P1.3.  <a href="group__SSC__PORTS.html#gaedfa633a16d9466f031d2b1c81276ac7">More...</a><br /></td></tr>
<tr class="separator:gaedfa633a16d9466f031d2b1c81276ac7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4224ea126543ef2f630bafe57c0eb802"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__ssc_8h.html#a4224ea126543ef2f630bafe57c0eb802">SSC_MASTER</a>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:a4224ea126543ef2f630bafe57c0eb802"><td class="mdescLeft">&#160;</td><td class="mdescRight">Master mode, output shift clock on SCLK.  <a href="#a4224ea126543ef2f630bafe57c0eb802">More...</a><br /></td></tr>
<tr class="separator:a4224ea126543ef2f630bafe57c0eb802"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9f34b0c8840f798c975b73779404d52"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__ssc_8h.html#aa9f34b0c8840f798c975b73779404d52">SSC_SLAVE</a>&#160;&#160;&#160;0</td></tr>
<tr class="memdesc:aa9f34b0c8840f798c975b73779404d52"><td class="mdescLeft">&#160;</td><td class="mdescRight">Slave mode, receive shift clock on SCLK.  <a href="#aa9f34b0c8840f798c975b73779404d52">More...</a><br /></td></tr>
<tr class="separator:aa9f34b0c8840f798c975b73779404d52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae81e284e482878040cf8bcb6bd783ba0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__ssc_8h.html#ae81e284e482878040cf8bcb6bd783ba0">SSC_BAUD</a>(bps)&#160;&#160;&#160;(uword)(12000000ul / (bps) - 1)</td></tr>
<tr class="memdesc:ae81e284e482878040cf8bcb6bd783ba0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts a baud rate value in bits/s into a baud rate value for the <a class="el" href="hsk__ssc_8h.html#a32ce04bbc07c3303ebab46a04014856c" title="The maximum baud rate in master mode is 12000000 bits/s, and 6000000 bits/s in slave mode...">hsk_ssc_init()</a> function.  <a href="#ae81e284e482878040cf8bcb6bd783ba0">More...</a><br /></td></tr>
<tr class="separator:ae81e284e482878040cf8bcb6bd783ba0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59306040e4f11b6e255648533c80ef2f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__ssc_8h.html#a59306040e4f11b6e255648533c80ef2f">SSC_CONF</a>(width,  heading,  phase,  polarity,  duplex)&#160;&#160;&#160;(((width) - 1) | ((heading) &lt;&lt; 4) | ((phase) &lt;&lt; 5) | ((polarity) &lt;&lt; 6) | ((duplex) &lt;&lt; 7))</td></tr>
<tr class="memdesc:a59306040e4f11b6e255648533c80ef2f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates an SSC configuration byte.  <a href="#a59306040e4f11b6e255648533c80ef2f">More...</a><br /></td></tr>
<tr class="separator:a59306040e4f11b6e255648533c80ef2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af90e3c9ffe0ce0c05b6260ce775d575a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__ssc_8h.html#af90e3c9ffe0ce0c05b6260ce775d575a">hsk_ssc_busy</a>()&#160;&#160;&#160;ESSC</td></tr>
<tr class="memdesc:af90e3c9ffe0ce0c05b6260ce775d575a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns whether the SSC is currently busy with data transmission.  <a href="#af90e3c9ffe0ce0c05b6260ce775d575a">More...</a><br /></td></tr>
<tr class="separator:af90e3c9ffe0ce0c05b6260ce775d575a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a32ce04bbc07c3303ebab46a04014856c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__ssc_8h.html#a32ce04bbc07c3303ebab46a04014856c">hsk_ssc_init</a> (const uword baud, const ubyte config, const bool mode)</td></tr>
<tr class="memdesc:a32ce04bbc07c3303ebab46a04014856c"><td class="mdescLeft">&#160;</td><td class="mdescRight">The maximum baud rate in master mode is 12000000 bits/s, and 6000000 bits/s in slave mode.  <a href="#a32ce04bbc07c3303ebab46a04014856c">More...</a><br /></td></tr>
<tr class="separator:a32ce04bbc07c3303ebab46a04014856c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae1a89bb7115c92f0186b64cba2e370e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__ssc_8h.html#aae1a89bb7115c92f0186b64cba2e370e">hsk_ssc_ports</a> (const ubyte ports)</td></tr>
<tr class="memdesc:aae1a89bb7115c92f0186b64cba2e370e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configure the I/O ports of the SSC unit.  <a href="#aae1a89bb7115c92f0186b64cba2e370e">More...</a><br /></td></tr>
<tr class="separator:aae1a89bb7115c92f0186b64cba2e370e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6eae9de9f405ff47ce82a8e55d4a3b00"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__ssc_8h.html#a6eae9de9f405ff47ce82a8e55d4a3b00">hsk_ssc_talk</a> (char *buffer, ubyte len)</td></tr>
<tr class="memdesc:a6eae9de9f405ff47ce82a8e55d4a3b00"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send and receive data.  <a href="#a6eae9de9f405ff47ce82a8e55d4a3b00">More...</a><br /></td></tr>
<tr class="separator:a6eae9de9f405ff47ce82a8e55d4a3b00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10dac189d0e0bc2286fbacea9f9c5632"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__ssc_8h.html#a10dac189d0e0bc2286fbacea9f9c5632">hsk_ssc_enable</a> ()</td></tr>
<tr class="memdesc:a10dac189d0e0bc2286fbacea9f9c5632"><td class="mdescLeft">&#160;</td><td class="mdescRight">Turn the SSC module on.  <a href="#a10dac189d0e0bc2286fbacea9f9c5632">More...</a><br /></td></tr>
<tr class="separator:a10dac189d0e0bc2286fbacea9f9c5632"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7765c8d1910278c143f0581eaf5b57d1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__ssc_8h.html#a7765c8d1910278c143f0581eaf5b57d1">hsk_ssc_disable</a> ()</td></tr>
<tr class="memdesc:a7765c8d1910278c143f0581eaf5b57d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Turn the SSC module off.  <a href="#a7765c8d1910278c143f0581eaf5b57d1">More...</a><br /></td></tr>
<tr class="separator:a7765c8d1910278c143f0581eaf5b57d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>HSK Synchronous Serial Interface headers. </p>
<p>General purpose serial communication, setup in the following order:</p><ul>
<li><a class="el" href="hsk__ssc_8h.html#a32ce04bbc07c3303ebab46a04014856c" title="The maximum baud rate in master mode is 12000000 bits/s, and 6000000 bits/s in slave mode...">hsk_ssc_init()</a></li>
<li><a class="el" href="hsk__ssc_8h.html#aae1a89bb7115c92f0186b64cba2e370e" title="Configure the I/O ports of the SSC unit. ">hsk_ssc_ports()</a></li>
<li><a class="el" href="hsk__ssc_8h.html#a10dac189d0e0bc2286fbacea9f9c5632" title="Turn the SSC module on. ">hsk_ssc_enable()</a></li>
</ul>
<p>Communication is established by the <a class="el" href="hsk__ssc_8h.html#a6eae9de9f405ff47ce82a8e55d4a3b00" title="Send and receive data. ">hsk_ssc_talk()</a> function. Use <a class="el" href="hsk__ssc_8h.html#af90e3c9ffe0ce0c05b6260ce775d575a" title="Returns whether the SSC is currently busy with data transmission. ">hsk_ssc_busy()</a> to detect whether a buffer was completely read and written.</p>
<dl class="section author"><dt>Author</dt><dd>kami</dd></dl>
<h1><a class="anchor" id="half_dublex"></a>
Half Duplex Operation</h1>
<p>For half duplex operation TX and RX pins need to be short circuited.</p>
<p>The TX pin is set up in open drain mode, i.e. an external pull-up resistor is required.</p>
<p>The TX pin needs to be manually configured before calling <a class="el" href="hsk__ssc_8h.html#a6eae9de9f405ff47ce82a8e55d4a3b00" title="Send and receive data. ">hsk_ssc_talk()</a> in order to speak or listen on the bus. To listen the TX pin needs to be configured as an input pin, to speak on the bus as an output pin. For efficiency reasons this is not handled by this library (it would result in lots of runtime logic for what should be a single instruction).</p>
<p>Instead it is recommended to define macros in a central header. E.g. for the port configuration <a class="el" href="group__SSC__PORTS.html#gac2a010f3ef54b85e255314c005f77864">SSC_MRST_P05</a> in slave mode the following code would work: </p><div class="fragment"><div class="line"><span class="preprocessor">#define SSC_TX()    (P0_DIR |= 1 &lt;&lt; 5)</span></div><div class="line"><span class="preprocessor">#define SSC_RX()    (P0_DIR &amp;= ~(1 &lt;&lt; 5))</span></div></div><!-- fragment --><p>Syntactically it can be used like a regular function: </p><div class="fragment"><div class="line">SSC_TX();</div><div class="line"><a class="code" href="hsk__ssc_8h.html#a6eae9de9f405ff47ce82a8e55d4a3b00">hsk_ssc_talk</a>(buffer, <span class="keyword">sizeof</span>(buffer) - 1);</div></div><!-- fragment --> </div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="af90e3c9ffe0ce0c05b6260ce775d575a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af90e3c9ffe0ce0c05b6260ce775d575a">&sect;&nbsp;</a></span>hsk_ssc_busy</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define hsk_ssc_busy</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;ESSC</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns whether the SSC is currently busy with data transmission. </p>

</div>
</div>
<a id="ae81e284e482878040cf8bcb6bd783ba0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae81e284e482878040cf8bcb6bd783ba0">&sect;&nbsp;</a></span>SSC_BAUD</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SSC_BAUD</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">bps</td><td>)</td>
          <td>&#160;&#160;&#160;(uword)(12000000ul / (bps) - 1)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Converts a baud rate value in bits/s into a baud rate value for the <a class="el" href="hsk__ssc_8h.html#a32ce04bbc07c3303ebab46a04014856c" title="The maximum baud rate in master mode is 12000000 bits/s, and 6000000 bits/s in slave mode...">hsk_ssc_init()</a> function. </p>
<p>The distance between adjustable baud rates grows exponentially. Available baud rates in kBit progress like this:</p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\[\{12000, 6000, 4000, 3000, 2400, 2000, ...\}\]" src="form_20.png"/>
</p>
<p>Use the following formula to determine the baud rate that results from a desired value: </p><p class="formulaDsp">
<img class="formulaDsp" alt="\[{realBps}(bps) = \frac{12000000}{\lfloor\frac{12000000}{bps}\rfloor}\]" src="form_21.png"/>
</p>
<dl class="section note"><dt>Note</dt><dd>The maximum speed is 12 Mbit/s in master mode and 6 Mbit/s in slave mode. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bps</td><td>The desired number in bits/s </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A timer reload value </dd></dl>

</div>
</div>
<a id="a59306040e4f11b6e255648533c80ef2f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a59306040e4f11b6e255648533c80ef2f">&sect;&nbsp;</a></span>SSC_CONF</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SSC_CONF</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">width, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">heading, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">phase, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">polarity, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">duplex&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;(((width) - 1) | ((heading) &lt;&lt; 4) | ((phase) &lt;&lt; 5) | ((polarity) &lt;&lt; 6) | ((duplex) &lt;&lt; 7))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generates an SSC configuration byte. </p>
<p>For details check the XC878 user manual section 12.3.5.1.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">width</td><td>The data with in bits, the available range is <img class="formulaInl" alt="$[2;8]$" src="form_22.png"/> </td></tr>
    <tr><td class="paramname">heading</td><td>Use 0 for transmitting/receiving LSB first, 1 for MSB first </td></tr>
    <tr><td class="paramname">phase</td><td>Use 0 to shift on leading and latch on trailing edge, use 1 to shift on trailing and latch on leading edge </td></tr>
    <tr><td class="paramname">polarity</td><td>Use 0 for low idle clock, and 1 for high idle clock </td></tr>
    <tr><td class="paramname">duplex</td><td>Use 0 for full duplex mode and 1 for half duplex </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4224ea126543ef2f630bafe57c0eb802"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4224ea126543ef2f630bafe57c0eb802">&sect;&nbsp;</a></span>SSC_MASTER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SSC_MASTER&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Master mode, output shift clock on SCLK. </p>

</div>
</div>
<a id="aa9f34b0c8840f798c975b73779404d52"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9f34b0c8840f798c975b73779404d52">&sect;&nbsp;</a></span>SSC_SLAVE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SSC_SLAVE&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Slave mode, receive shift clock on SCLK. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a7765c8d1910278c143f0581eaf5b57d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7765c8d1910278c143f0581eaf5b57d1">&sect;&nbsp;</a></span>hsk_ssc_disable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void hsk_ssc_disable </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Turn the SSC module off. </p>

</div>
</div>
<a id="a10dac189d0e0bc2286fbacea9f9c5632"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10dac189d0e0bc2286fbacea9f9c5632">&sect;&nbsp;</a></span>hsk_ssc_enable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void hsk_ssc_enable </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Turn the SSC module on. </p>

</div>
</div>
<a id="a32ce04bbc07c3303ebab46a04014856c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32ce04bbc07c3303ebab46a04014856c">&sect;&nbsp;</a></span>hsk_ssc_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void hsk_ssc_init </td>
          <td>(</td>
          <td class="paramtype">const uword&#160;</td>
          <td class="paramname"><em>baud</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ubyte&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The maximum baud rate in master mode is 12000000 bits/s, and 6000000 bits/s in slave mode. </p>
<p>Calling this function turns the SSC off until <a class="el" href="hsk__ssc_8h.html#a10dac189d0e0bc2286fbacea9f9c5632" title="Turn the SSC module on. ">hsk_ssc_enable()</a> is called.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">baud</td><td>The timer reload value for the baud rate generator, use <a class="el" href="hsk__ssc_8h.html#ae81e284e482878040cf8bcb6bd783ba0">SSC_BAUD</a> to generate this value </td></tr>
    <tr><td class="paramname">config</td><td>The SSC configuration byte, use <a class="el" href="hsk__ssc_8h.html#a59306040e4f11b6e255648533c80ef2f">SSC_CONF</a> to generate it </td></tr>
    <tr><td class="paramname">mode</td><td>Select master or slave operation </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aae1a89bb7115c92f0186b64cba2e370e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae1a89bb7115c92f0186b64cba2e370e">&sect;&nbsp;</a></span>hsk_ssc_ports()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void hsk_ssc_ports </td>
          <td>(</td>
          <td class="paramtype">const ubyte&#160;</td>
          <td class="paramname"><em>ports</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configure the I/O ports of the SSC unit. </p>
<dl class="section warning"><dt>Warning</dt><dd>Do not use when the SSC is enabled. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ports</td><td>Selects an <a class="el" href="group__SSC__PORTS.html">SSC I/O Ports</a> I/O port configuration </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6eae9de9f405ff47ce82a8e55d4a3b00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6eae9de9f405ff47ce82a8e55d4a3b00">&sect;&nbsp;</a></span>hsk_ssc_talk()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void hsk_ssc_talk </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ubyte&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send and receive data. </p>
<p>The buffer with the given length should contain the data to transceive and will be filled with the received data upon completion.</p>
<p>The provided buffer needs to reside in xdata memory, e.g. to create and use a string buffer the following should work: </p><div class="fragment"><div class="line"><span class="keywordtype">char</span> xdata buffer[] = <span class="stringliteral">&quot;20 character buffer.&quot;</span>;</div><div class="line">â€¦</div><div class="line"><a class="code" href="hsk__ssc_8h.html#a6eae9de9f405ff47ce82a8e55d4a3b00">hsk_ssc_talk</a>(buffer, <span class="keyword">sizeof</span>(buffer) - 1);</div></div><!-- fragment --><p>Note that char must not be const and that <img class="formulaInl" alt="$sizeof(buffer) - 1$" src="form_23.png"/> is used to prevent sending and overwriting the terminal 0 character. There may be cases where a terminal 0 character is desired.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>The rx/tx transmission buffer </td></tr>
    <tr><td class="paramname">len</td><td>The length of the buffer </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_9c4e1753adb44ea3ca4371fb84009578.html">hsk_ssc</a></li><li class="navelem"><a class="el" href="hsk__ssc_8h.html">hsk_ssc.h</a></li>
    <li class="footer">Generated on Tue Jan 17 2017 00:45:19 for hsk-libs-user by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.12 </li>
  </ul>
</div>
</body>
</html>
